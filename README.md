# 毕业设计 后端

## 如何存储用户照片

使用 AWS S3 或 MinIO 等服务对于一个毕业设计来说太取巧了，我们优先考虑将图片直接存储在服务器磁盘上，更加直观，没有额外的经济和网络条件依赖。

如何在服务器磁盘上存储和管理大量用户上传的照片是个问题。下面是几篇相关讨论：

- [将用户上传的文件存储在网络服务器上的实践](https://stackoverflow.com/a/7925338/8198710)
- [在网站上上传和存储图片的最佳方式是什么？](https://stackoverflow.com/a/8922090/8198710)
- [图片上传存储策略](https://stackoverflow.com/a/2664956)

综合这几个讨论，最终决策是：

- 文件名使用 UUID 等算法创建，以避免冲突；
- 不为每个用户创建一个单独的文件夹；
- 文件夹结构采用 `year/mmdd/{filename}` 方案；

## 如何加载照片

如果服务器提供图片的静态地址，则会导致用户照片泄露到公共领域。可以创建一个常规接口用来提供照片，前端使用照片id加载图片。

同时，为了验证用户对照片的访问权限，还需要使用 cookie 来验证用户信息。
